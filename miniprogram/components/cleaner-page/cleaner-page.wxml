<!-- components/cleaner-page/cleaner-page.wxml -->
<view class="cleaner-container">
  <!-- å¤´éƒ¨ä¿¡æ¯ -->
  <view class="header">
    <view class="user-info">
      <text class="role-icon">ğŸ§¹</text>
      <text class="role-name">ä¿æ´å·¥ä½œå°</text>
    </view>
    <view class="welcome">æ‚¨å¥½ï¼Œ{{userInfo.name}}ï¼</view>
  </view>

  <!-- ä»Šæ—¥ç»Ÿè®¡ -->
  <view class="stats-card">
    <view class="stats-title">ä»Šæ—¥å·¥ä½œè¿›åº¦</view>
    <view class="progress-container">
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{(todayStats.completed / todayStats.total) * 100}}%"></view>
      </view>
      <view class="progress-text">{{todayStats.completed}}/{{todayStats.total}} ä¸ªä»»åŠ¡</view>
    </view>
    <view class="completed-areas">
      å·²æ¸…æ´åŒºåŸŸï¼š{{todayStats.areas.join('ã€')}}
    </view>
  </view>

  <!-- ä»»åŠ¡åˆ—è¡¨ -->
  <view class="section">
    <view class="section-title">ä»Šæ—¥æ¸…æ´ä»»åŠ¡</view>
    <view class="task-list">
      <view 
        class="task-item {{task.status === 'å·²å®Œæˆ' ? 'completed' : ''}} {{task.status === 'è¿›è¡Œä¸­' ? 'in-progress' : ''}}"
        wx:for="{{tasks}}"
        wx:key="id"
        data-id="{{item.id}}"
        data-task="{{item}}"
        bind:tap="viewTaskDetail"
      >
        <view class="task-info">
          <view class="task-name">{{item.name}}</view>
          <view class="task-details">
            <text class="task-area">{{item.area}}</text>
            <text class="task-time">{{item.time}}</text>
          </view>
        </view>
        <view class="task-status">
          <text class="status-badge pending" wx:if="{{item.status === 'å¾…å®Œæˆ'}}">{{item.status}}</text>
          <text class="status-badge inprogress" wx:if="{{item.status === 'è¿›è¡Œä¸­'}}">{{item.status}}</text>
          <text class="status-badge completed" wx:if="{{item.status === 'å·²å®Œæˆ'}}">{{item.status}}</text>
          <text class="status-badge notstarted" wx:if="{{item.status === 'æœªå¼€å§‹'}}">{{item.status}}</text>
          <button
            class="complete-btn"
            wx:if="{{item.status !== 'å·²å®Œæˆ'}}"
            data-id="{{item.id}}"
            bind:tap="markTaskComplete"
            size="mini"
          >å®Œæˆ</button>
        </view>
      </view>
    </view>
  </view>

  <!-- æ¸…æ´ç”¨å“åº“å­˜ -->
  <view class="section">
    <view class="section-title">æ¸…æ´ç”¨å“åº“å­˜</view>
    <view class="supplies-list">
      <view class="supply-item" wx:for="{{supplies}}" wx:key="name">
        <view class="supply-name">{{item.name}}</view>
        <view class="supply-quantity">
          <text class="quantity">{{item.quantity}}</text>
          <text class="unit">{{item.unit}}</text>
        </view>
      </view>
    </view>
    <button class="apply-btn" bind:tap="applySupply">ç”³è¯·è¡¥ç»™</button>
  </view>

  <!-- åŠŸèƒ½æŒ‰é’® -->
  <view class="action-buttons">
    <button class="action-btn" bind:tap="viewWorkRecords">å·¥ä½œè®°å½•</button>
    <button class="action-btn primary">æ‰“å¡ä¸Šç­</button>
  </view>
</view>